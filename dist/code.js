!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=162)}({162:function(e,t,n){"use strict";n.r(t);const a=[],i=(e,t)=>{figma.ui.postMessage({action:e,data:t})};function o(e){for(;"PAGE"!==e.type;)e=e.parent;return e}n=(e,t)=>{a.push({type:e,callback:t})},figma.ui.onmessage=e=>{for(var t of a)e.action===t.type&&t.callback(e.data)};const r=setInterval(()=>{for(var e of figma.currentPage.selection){var t=figma.currentPage.getPluginData(e.id);if(t){const n=figma.getNodeById(t);!n||"GROUP"!==n.type&&"FRAME"!==n.type||n.x==e.x&&n.y==e.y-49||(n.x=e.x,n.y=e.y-49)}}},50);figma.showUI(__html__,{visible:!1});let g=!1,c=(figma.clientStorage.setAsync("access-token",void 0).then(),figma.root.setPluginData("nodes",""),figma.fileKey);c=c||figma.root.getPluginData("file-id");const l=async()=>Promise.all([figma.clientStorage.getAsync("language"),figma.clientStorage.getAsync("access-token"),figma.clientStorage.getAsync("provider")]);function s(){if(0<figma.currentPage.selection.length){const t=figma.currentPage.selection[0];var e;"GROUP"===t.type&&t.name.startsWith("Tag#")&&(e=t.name.slice(4),(e=figma.getNodeById(e))&&(figma.currentPage=d(e),figma.currentPage.selection=[e]))}}function f(){try{var e=0<figma.currentPage.selection.length?u(figma.currentPage.selection[0]):figma.currentPage,t=e.width;return{type:"PAGE"===e.type?"PAGE":"FRAME",id:e.id,name:e.name,width:t}}catch(e){return{type:"PAGE",id:figma.currentPage.id,name:figma.currentPage.name,width:-1}}}function u(e){if(null===e.parent)return e;for(;"PAGE"!==e.parent.type;)e=e.parent;return e}function d(e){for(;"PAGE"!==e.type;)e=e.parent;return e}("lookup"===figma.command?async()=>{var[e,t,n]=await l();s(),i("init",{language:e||"en",accessToken:t,provider:n,page:"PageSelect",fileId:c,selection:f()})}:async()=>{var[e,t,n]=await l();s(),i("init",{language:e||"en",accessToken:t,provider:n,page:"PageNode",fileId:c,selection:f()})})(),n("resize",e=>{g||(figma.ui.show(),g=!0),figma.ui.resize(e.width,e.height)}),n("client-storage-get",e=>{figma.clientStorage.getAsync(e.key).then(t=>{t={key:e.key,result:t},i("client-storage-get",t)})}),n("client-storage-set",e=>{figma.clientStorage.setAsync(e.key,e.data).then(()=>{var t={key:e.key,suc:!0};i("client-storage-set",t)})}),n("document-plugin-data-get",e=>{e={key:e,value:figma.root.getPluginData(e)},i("document-plugin-data-get",e)}),n("document-plugin-data-set",e=>{figma.root.setPluginData(e.key,e.value),i("document-plugin-data-set",{key:e.key,suc:!0})}),n("notify",e=>{"string"==typeof e?figma.notify(e):figma.notify(JSON.stringify(e))}),n("notify-err",e=>{"string"==typeof e?figma.notify(e,{error:!0}):figma.notify(JSON.stringify(e),{error:!0})}),n("canvas-mark-node",e=>{{var t=new Map(JSON.parse(e.fullTags)),n=JSON.parse(e.node);const a=figma.getNodeById(n.node_id);if(a){a.setRelaunchData({node:n.title});const i=o(a);i.id!==a.id&&((e=i.getPluginData(n.node_id))&&null!=(e=figma.getNodeById(e))&&e.remove(),0!==Object.values(n.tags).flat().length&&figma.loadFontAsync({family:"Inter",style:"Semi Bold"}).then(()=>{const e=figma.createFrame(),o=(e.x=a.x,e.y=a.y-49,[]);for(let e in n.tags)t.has(e)&&o.push(...t.get(e).tags.filter(t=>n.tags[e].find(e=>t.name===e)));e.name=o.map(e=>e.name).join(),e.fills=[],e.layoutMode="HORIZONTAL",e.layoutAlign="INHERIT",e.layoutGrow=0,e.primaryAxisAlignItems="MIN",e.primaryAxisSizingMode="AUTO",e.counterAxisSizingMode="AUTO",e.itemSpacing=8,o.forEach(t=>{const n=figma.createFrame(),a=(n.name=t.name,figma.createText());a.fontName={family:"Inter",style:"Semi Bold"},a.lineHeight={value:21,unit:"PIXELS"},a.fontSize=14,a.characters=t.name,a.fills=[{type:"SOLID",color:{r:t.color.r/255,g:t.color.g/255,b:t.color.b/255},opacity:t.color.a}],n.appendChild(a),n.layoutMode="HORIZONTAL",n.primaryAxisSizingMode="AUTO",n.counterAxisSizingMode="AUTO",n.paddingTop=4,n.paddingBottom=4,n.paddingLeft=16,n.paddingRight=16,n.cornerRadius=4,n.fills=[{type:"SOLID",color:{r:t.background.r/255,g:t.background.g/255,b:t.background.b/255}}],n.strokes=[{type:"SOLID",color:{r:0,g:0,b:0},opacity:.05}],e.appendChild(n)});const r=figma.group([e],i);r.name="Tag#"+n.node_id,i.appendChild(r),i.setPluginData(n.node_id,r.id)}).catch(e=>{figma.notify("Font family not found!",{error:!0})}))}return}}),n("canvas-unmark-node",e=>{{const t=figma.getNodeById(e);if(t){t.setRelaunchData({});(e=o(t).getPluginData(e))&&null!=(e=figma.getNodeById(e))&&e.remove()}return}}),n("request-selection",()=>{i("selectionchange",f())}),n("select-node",e=>{var t=figma.getNodeById(e);t?(figma.currentPage=d(t),"PAGE"!==t.type&&(figma.currentPage.selection=[u(t)],figma.viewport.scrollAndZoomIntoView([t]))):figma.notify("Missing node "+e+"?")}),figma.on("selectionchange",()=>{s(),i("selectionchange",f())}),figma.on("currentpagechange",()=>{i("selectionchange",f())}),figma.on("close",()=>{clearInterval(r)})}});