<template>
  <div class="current-select">
    <div class="current-select-name">
      <svg v-show="current?.node.type === 'PAGE'" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_147_100)">
          <path d="M12.0888 4.50804L9.20667 1.62589C9.12631 1.54554 9.01783 1.5 8.90399 1.5H3.2147C2.97765 1.5 2.78613 1.69152 2.78613 1.92857V13.0714C2.78613 13.3085 2.97765 13.5 3.2147 13.5H11.7861C12.0232 13.5 12.2147 13.3085 12.2147 13.0714V4.81205C12.2147 4.69821 12.1692 4.58839 12.0888 4.50804ZM11.2263 5.00893H8.70578V2.48839L11.2263 5.00893ZM11.2504 12.5357H3.75042V2.46429H7.79506V5.35714C7.79506 5.50633 7.85433 5.6494 7.95981 5.75489C8.0653 5.86038 8.20838 5.91964 8.35756 5.91964H11.2504V12.5357Z" fill="black" fill-opacity="0.85"/>
        </g>
        <defs>
          <clipPath id="clip0_147_100">
            <rect width="12" height="12" fill="white" transform="translate(1.5 1.5)"/>
          </clipPath>
        </defs>
      </svg>
      <%= require('./frame.svg') %>
      <svg v-show="current?.node.type === 'FRAME'" width="15" height="15" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.5 5H12.5V4H1.5V5Z" fill="#333333"/>
        <path d="M1.5 10H12.5V9H1.5V10Z" fill="#333333"/>
        <path d="M4 1.5V12.5H5V1.5H4Z" fill="#333333"/>
        <path d="M9 1.5V12.5H10V1.5H9Z" fill="#333333"/>
      </svg>
      <p> {{ current ? current.node.name : '...' }} </p>
    </div>
    <button v-on:click="$emit('refresh')" class="current-select-icon">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M13.2048 2.27031L12.3236 2.95938C11.122 1.42344 9.25325 0.4375 7.15482 0.4375C3.53138 0.4375 0.598565 3.36719 0.593878 6.99219C0.58919 10.6203 3.52825 13.5625 7.15482 13.5625C9.98763 13.5625 12.4017 11.7656 13.3204 9.24844C13.3439 9.18281 13.3095 9.10938 13.2439 9.0875L12.3579 8.78281C12.3271 8.77223 12.2932 8.77415 12.2638 8.78816C12.2343 8.80218 12.2114 8.82718 12.2001 8.85781C12.172 8.93594 12.1408 9.01406 12.1079 9.09063C11.8376 9.73125 11.4501 10.3063 10.9564 10.8C10.4666 11.2907 9.88673 11.6822 9.24857 11.9531C8.58763 12.2328 7.88294 12.375 7.15794 12.375C6.43138 12.375 5.72825 12.2328 5.06731 11.9531C4.42853 11.6834 3.84844 11.2917 3.3595 10.8C2.86841 10.3103 2.47729 9.72972 2.20794 9.09063C1.92825 8.42813 1.78607 7.725 1.78607 6.99844C1.78607 6.27188 1.92825 5.56875 2.20794 4.90625C2.47825 4.26563 2.86575 3.69063 3.3595 3.19688C3.85325 2.70313 4.42825 2.31563 5.06731 2.04375C5.72825 1.76406 6.43294 1.62188 7.15794 1.62188C7.8845 1.62188 8.58763 1.76406 9.24857 2.04375C9.88735 2.31351 10.4674 2.70519 10.9564 3.19688C11.1111 3.35156 11.2564 3.51563 11.3908 3.6875L10.4501 4.42188C10.4315 4.43627 10.4173 4.45563 10.4092 4.47772C10.4011 4.49981 10.3995 4.52374 10.4043 4.54676C10.4092 4.56977 10.4205 4.59094 10.4369 4.60782C10.4533 4.6247 10.4741 4.63661 10.497 4.64219L13.2408 5.31406C13.3189 5.33281 13.3954 5.27344 13.3954 5.19375L13.4079 2.36719C13.4064 2.26406 13.2861 2.20625 13.2048 2.27031V2.27031Z" fill="black" fill-opacity="0.85"/>
      </svg>
    </button>
    <button v-on:click="$emit('page-settings')" class="current-select-icon" style="border-left: 1px #E0E0E0 solid">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_132_42)">
          <path d="M13.4498 8.77885L12.4264 7.90385C12.4748 7.60697 12.4998 7.30384 12.4998 7.00072C12.4998 6.6976 12.4748 6.39447 12.4264 6.0976L13.4498 5.2226C13.527 5.15651 13.5823 5.06849 13.6082 4.97025C13.6342 4.872 13.6296 4.76818 13.5951 4.6726L13.5811 4.63197C13.2993 3.84451 12.8774 3.11453 12.3358 2.47728L12.3076 2.44447C12.2419 2.36721 12.1544 2.31167 12.0565 2.28517C11.9586 2.25867 11.8549 2.26246 11.7592 2.29603L10.4889 2.7476C10.0201 2.36322 9.49671 2.0601 8.93108 1.8476L8.68577 0.51947C8.66726 0.419536 8.61879 0.327599 8.54678 0.255873C8.47478 0.184147 8.38265 0.136028 8.28265 0.117908L8.24046 0.110095C7.4264 -0.0367798 6.57015 -0.0367798 5.75608 0.110095L5.7139 0.117908C5.61389 0.136028 5.52177 0.184147 5.44976 0.255873C5.37776 0.327599 5.32928 0.419536 5.31077 0.51947L5.0639 1.85385C4.50278 2.06639 3.98025 2.36935 3.51702 2.75072L2.23733 2.29603C2.14165 2.26219 2.03794 2.25827 1.93998 2.28478C1.84202 2.3113 1.75444 2.36699 1.68889 2.44447L1.66077 2.47728C1.11975 3.11498 0.69792 3.84484 0.415457 4.63197L0.401395 4.6726C0.331082 4.86791 0.388895 5.08666 0.546707 5.2226L1.58264 6.10697C1.53421 6.40072 1.51077 6.70072 1.51077 6.99916C1.51077 7.29916 1.53421 7.59916 1.58264 7.89135L0.546707 8.77572C0.469513 8.8418 0.414264 8.92982 0.388307 9.02807C0.36235 9.12631 0.366915 9.23013 0.401395 9.32572L0.415457 9.36635C0.69827 10.1538 1.11702 10.8804 1.66077 11.521L1.68889 11.5538C1.7546 11.6311 1.84218 11.6866 1.94009 11.7131C2.03799 11.7396 2.14162 11.7359 2.23733 11.7023L3.51702 11.2476C3.98265 11.6304 4.50296 11.9335 5.0639 12.1445L5.31077 13.4788C5.32928 13.5788 5.37776 13.6707 5.44976 13.7424C5.52177 13.8142 5.61389 13.8623 5.7139 13.8804L5.75608 13.8882C6.57763 14.0359 7.41892 14.0359 8.24046 13.8882L8.28265 13.8804C8.38265 13.8623 8.47478 13.8142 8.54678 13.7424C8.61879 13.6707 8.66726 13.5788 8.68577 13.4788L8.93108 12.1507C9.49648 11.9388 10.0229 11.6347 10.4889 11.2507L11.7592 11.7023C11.8549 11.7361 11.9586 11.74 12.0566 11.7135C12.1545 11.687 12.2421 11.6313 12.3076 11.5538L12.3358 11.521C12.8795 10.8788 13.2983 10.1538 13.5811 9.36635L13.5951 9.32572C13.6655 9.13353 13.6076 8.91478 13.4498 8.77885ZM11.317 6.28197C11.3561 6.51791 11.3764 6.7601 11.3764 7.00228C11.3764 7.24447 11.3561 7.48666 11.317 7.72259L11.2139 8.34916L12.3811 9.3476C12.2041 9.75523 11.9808 10.1411 11.7155 10.4976L10.2655 9.98353L9.77483 10.3867C9.4014 10.6929 8.98577 10.9335 8.53577 11.1023L7.94046 11.3257L7.66077 12.8413C7.21947 12.8913 6.77394 12.8913 6.33264 12.8413L6.05296 11.3226L5.46233 11.096C5.01702 10.9273 4.60296 10.6867 4.23265 10.382L3.74202 9.97728L2.28265 10.496C2.01702 10.1382 1.79514 9.75228 1.61702 9.34603L2.79671 8.33822L2.69515 7.71322C2.65765 7.48041 2.63733 7.23978 2.63733 7.00228C2.63733 6.76322 2.65608 6.52416 2.69515 6.29135L2.79671 5.66635L1.61702 4.65853C1.79358 4.25072 2.01702 3.86634 2.28265 3.50853L3.74202 4.02728L4.23265 3.6226C4.60296 3.31791 5.01702 3.07728 5.46233 2.90853L6.05452 2.6851L6.33421 1.16635C6.77327 1.11635 7.22171 1.11635 7.66233 1.16635L7.94202 2.68197L8.53733 2.90541C8.98577 3.07416 9.40296 3.31478 9.7764 3.62103L10.267 4.02416L11.717 3.5101C11.9826 3.86791 12.2045 4.25385 12.3826 4.6601L11.2155 5.65853L11.317 6.28197ZM6.99983 4.09603C5.48108 4.09603 4.24983 5.32728 4.24983 6.84603C4.24983 8.36478 5.48108 9.59603 6.99983 9.59603C8.51858 9.59603 9.74983 8.36478 9.74983 6.84603C9.74983 5.32728 8.51858 4.09603 6.99983 4.09603ZM8.23733 8.08353C8.07502 8.24631 7.88213 8.37539 7.66975 8.46334C7.45738 8.5513 7.2297 8.59639 6.99983 8.59603C6.53265 8.59603 6.09358 8.41322 5.76233 8.08353C5.59956 7.92122 5.47048 7.72833 5.38252 7.51595C5.29457 7.30358 5.24947 7.0759 5.24983 6.84603C5.24983 6.37885 5.43264 5.93978 5.76233 5.60853C6.09358 5.27728 6.53265 5.09603 6.99983 5.09603C7.46702 5.09603 7.90608 5.27728 8.23733 5.60853C8.40011 5.77084 8.52919 5.96373 8.61714 6.17611C8.7051 6.38849 8.75019 6.61616 8.74983 6.84603C8.74983 7.31322 8.56702 7.75228 8.23733 8.08353Z" fill="black" fill-opacity="0.85"/>
        </g>
        <defs>
          <clipPath id="clip0_132_42">
            <rect width="14" height="14" fill="white"/>
          </clipPath>
        </defs>
      </svg>
    </button>
  </div>
</template>

<script lang="ts">

import {PropType} from "vue";

export default {
  name: "PageNodeTopBar",
  props: {
    current: Object as PropType<TransferDeclare.CurrentSelection>,
  },
  emits: [ 'refresh', 'page-settings'],
  setup() {

  }
}

</script>

<style scoped>

.current-select {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 99;

  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 0;

  background: rgba(235, 235, 235, 0.9);
  backdrop-filter: blur(16px);

  border-bottom: 1px #E0E0E0 solid;
}

.current-select div {
  flex: none;
  order: 0;
  flex-grow: 1;
  margin: 0 0;
}

.current-select .current-select-name {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 8px 4px 8px 12px;
  width: 0;

  flex-grow: 1;

  font-size: 12px;
  line-height: 17px;
}

.current-select .current-select-name svg {
  flex: none;
  order: 0;
  flex-grow: 0;
  margin: 0 4px 0 0;
}

.current-select .current-select-name p {
  flex: none;
  order: 1;
  flex-grow: 1;
  margin: 0;
  user-select: none;
  width: 0;
  text-overflow: ellipsis;
  overflow: hidden;
}

.current-select button {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  padding: 10px;
  flex-grow: 0;
  background: none;
  border: none;
  cursor: pointer;
  transition: background-color 100ms ease;
}

.current-select button:hover {
  background: rgba(0, 0, 0, 0.05);
}

</style>